/** * Created by Administrator on 11/5/2017. */$(function(){    $.ajax({        type:"GET",        url:"../json/contacts",        dataType:"json",        success:detailsSucc,        error:detailsErr    })    function detailsSucc(data){        var html= "";        $.each(data, function (index) {            //循环获取数据            var Title=data[index].title;            var listItem=data[index].list;            //html+=`<p class="title"><div class=\"icon\"><i class=\"fa fa-check\"></i></div>${Title}<a><i class="fa fa-arrows-v"></i></a></p><ul>`;            html+="<p class=\"title\"><span class=\"icon\"><i class=\"fa fa-check\"></i></span>"+Title+"<a id=\"list-"+ index + "\" href=\"javascript:void(0);\"><i class=\"fa fa-arrows-v\"></i></a></p><ul style=\"display:none\" id=\"listItem-"+index+"\">";            $.each(listItem,function(i){                var Name =listItem[i].name;                var Email =listItem[i].email;                //html+= `<li>                //            <a href="#">                //                <div class="icon">                //                    <i class="fa fa-check"></i>                //                </div>                //                <div class="content">                //                    <h2>${Name}</h2>                //                    <h5>${Email}</h5>                //                </div>                //             </a>                //        </li>`;                html += "<li> <a href=\"#\"><div class=\"icon\"><i class=\"fa fa-check\"></i></div><div class=\"content\"><h2>" + Name + "</h2><h5>" + Email + "</h5></div></a></li>";            })            html+="</ul>";        });        $("#js_regular").prepend(html);        unflod();        addAll();        add();    }    function detailsErr(){        confirm("error");    }})function addAll(){    $("span[class=icon]").each(function(){        this.addEventListener("click",function(){            $(this).toggleClass("active");            if($(this).hasClass("active")){                $(this).parent().next().children().addClass("active");            }            else{                $(this).parent().next().children().removeClass("active");            }        });    })}function add(){    $("#js_regular>ul").each(function(){        console.log($(this));        $(this)[0].addEventListener("click",function(even){            var target=even.target;            $target=$(target);            console.log($target);            while($target[0].nodeName.toLowerCase()!="li"){                $target=$target.parent();            }            console.log($target);            $target.toggleClass("active");        })    })}function unflod(){    var list=[];    $("a[id^='list-']").each(function(){        var listItem=this.getAttribute("id");        var num=listItem.substr(listItem.indexOf("-")+1);        console.log(num);        $.inArray(num,list)===-1 && list.push(num);    })    console.log(list);    $.each(list,function(idex,item){        $("#list-"+item)[0].addEventListener("click",function(){            if($("#listItem-"+item).css("display")=="none"){                $("#listItem-"+item).css("display","block");                $(this).addClass("unflod");            }            else{                $("#listItem-"+item).css("display","none");                $(this).removeClass("unflod");            }        })    })}